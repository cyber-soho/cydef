<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wazuh Agent Hardening Interactive Guide</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom Config for Warm Neutrals Palette -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        // Warm Neutrals - "Stone" inspired
                        bgMain: '#F5F5F4', // stone-100
                        bgCard: '#FFFFFF',
                        primary: '#44403C', // stone-700
                        secondary: '#78716C', // stone-500
                        accent: '#D97706', // amber-600 (subtle accent)
                        border: '#E7E5E4', // stone-200
                        textMain: '#292524', // stone-800
                        textMuted: '#57534E', // stone-600
                        codeBg: '#1C1917', // stone-900
                    }
                }
            }
        }
    </script>

    <style>
        /* Chart Container Strict Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }

        /* Custom Scrollbar for code blocks */
        .custom-scroll::-webkit-scrollbar {
            height: 8px;
            width: 8px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #292524;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #57534E;
            border-radius: 4px;
        }
        
        .tab-active {
            border-bottom: 2px solid #44403C;
            color: #292524;
            font-weight: 600;
        }
        .tab-inactive {
            color: #78716C;
            border-bottom: 2px solid transparent;
        }
        .tab-inactive:hover {
            color: #44403C;
        }

        .check-item.completed {
            background-color: #F0FDFA; /* teal-50 */
            border-color: #14B8A6;
        }
    </style>

    <!-- Required Placeholders -->
    <!-- Chosen Palette: Warm Neutrals (Stone/Amber) for a calm, professional, readable security dashboard. -->
    <!-- Application Structure Plan:
         1. Header: simple branding.
         2. Intro: Context setting.
         3. Workflow Switcher: Windows vs. Linux tabs. 
            - Reasoning: Users typically harden one OS at a time. Splitting them reduces cognitive load.
         4. Dynamic Content Area: 
            - Shows OS-specific cards (Accordion style).
            - Includes dedicated Chart visualization for that OS to show "Value of Hardening".
         5. Hardening Checklist: A gamified checklist at the bottom that updates a global "Readiness" score.
         6. Data Flow: JS objects store the content; Chart.js updates via JS based on active tab.
    -->
    <!-- Visualization & Content Choices:
         1. Windows Radar Chart: To compare "Default" vs "Hardened" coverage across multiple vectors (Process, Network, File, Account).
            - Goal: Show the holistic improvement.
            - Library: Chart.js Radar.
         2. Linux Bar Chart: To show the increase in log granularity (e.g. "Commands Logged").
            - Goal: Visualise the "Black Box Recorder" concept mentioned in the report.
            - Library: Chart.js Bar.
         3. Readiness Gauge: Doughnut chart.
            - Goal: Encourage user to interact with the checklist.
         - NO SVG/Mermaid used. All charts are Canvas. Icons are Unicode.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-bgMain text-textMain min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white border-b border-border shadow-sm sticky top-0 z-10">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <span class="text-2xl">üõ°Ô∏è</span>
                <h1 class="text-xl font-bold tracking-tight text-primary">CyberSoHo's.<span class="text-accent">Wazuh Hardening</span></h1>
            </div>
            <nav class="hidden md:flex gap-6 text-sm font-medium text-textMuted">
                <a href="#" onclick="scrollToSection('intro')" class="hover:text-primary transition">Overview</a>
                <a href="#" onclick="scrollToSection('workstation')" class="hover:text-primary transition">OS Configuration</a>
                <a href="#" onclick="scrollToSection('checklist')" class="hover:text-primary transition">Checklist</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- Introduction Section -->
        <section id="intro" class="mb-10 text-center max-w-3xl mx-auto">
            <h2 class="text-3xl font-bold mb-4 text-primary">Beyond Default Security</h2>
            <p class="text-lg text-textMuted leading-relaxed">
                Default Wazuh agent configurations are designed for general health, not high-security environments. 
                They often miss critical events like <strong>Account Lockouts</strong> or <strong>Command Execution</strong>. 
                Use this interactive guide to implement the recommended hardening steps for Windows and Linux systems (Late 2025 Standards).
            </p>
        </section>

        <!-- OS Toggle / Main Dashboard -->
        <section id="workstation" class="mb-12">
            
            <!-- Tab Navigation -->
            <div class="flex justify-center border-b border-border mb-8">
                <button id="tab-windows" class="tab-active px-6 py-3 text-lg transition-all focus:outline-none" onclick="switchTab('windows')">
                    ü™ü Windows Hardening
                </button>
                <button id="tab-linux" class="tab-inactive px-6 py-3 text-lg transition-all focus:outline-none" onclick="switchTab('linux')">
                    üêß Linux Hardening
                </button>
            </div>

            <!-- Dynamic Content Container -->
            <div class="grid lg:grid-cols-2 gap-8 items-start">
                
                <!-- Left Column: Interactive Guide -->
                <div class="space-y-6">
                    <div id="section-intro" class="bg-white p-6 rounded-lg shadow-sm border border-border">
                        <h3 id="os-title" class="text-xl font-bold mb-2">Windows Server Protection</h3>
                        <p id="os-desc" class="text-textMuted">Windows hardening focuses on visibility. Default logs are noisy but shallow. We need to enable specific GPOs and inject Sysmon to see the full picture.</p>
                    </div>

                    <!-- Accordion Container -->
                    <div id="accordion-container" class="space-y-4">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Right Column: Visualization & Impact -->
                <div class="space-y-6 sticky top-24">
                    <!-- Chart Card -->
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-border">
                        <h3 class="text-lg font-semibold mb-1 text-primary">Visibility Impact Analysis</h3>
                        <p class="text-sm text-textMuted mb-6">Comparison of data granularity: Default vs. Hardened.</p>
                        
                        <!-- Chart Container -->
                        <div class="chart-container">
                            <canvas id="impactChart"></canvas>
                        </div>
                        
                        <div id="chart-legend" class="mt-4 text-sm text-center text-textMuted bg-bgMain p-3 rounded">
                            <!-- Dynamic Text -->
                        </div>
                    </div>

                    <!-- Quick Tip Card -->
                    <div class="bg-amber-50 p-5 rounded-lg border border-amber-100 flex items-start gap-3">
                        <span class="text-2xl mt-1">üí°</span>
                        <div>
                            <h4 class="font-bold text-amber-900 text-sm uppercase tracking-wide mb-1">Pro Tip</h4>
                            <p id="pro-tip-text" class="text-amber-800 text-sm">
                                Enable "Audit User Account Management" in GPO to catch Event 4740. Wazuh collects the Security channel by default, so no agent config change is needed for this specific event.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Checklist Section -->
        <section id="checklist" class="mt-16 bg-white rounded-xl shadow-sm border border-border overflow-hidden">
            <div class="p-8 grid lg:grid-cols-3 gap-8">
                
                <!-- List -->
                <div class="lg:col-span-2">
                    <h2 class="text-2xl font-bold mb-2 text-primary">Deployment Checklist</h2>
                    <p class="text-textMuted mb-6">Track your hardening progress across your fleet.</p>
                    
                    <div class="space-y-3" id="checklist-container">
                        <!-- Checkboxes populated by JS -->
                    </div>
                </div>

                <!-- Score Gauge -->
                <div class="flex flex-col items-center justify-center bg-bgMain rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4 text-primary">Readiness Score</h3>
                    <div class="chart-container" style="height: 200px; max-height: 200px;">
                        <canvas id="gaugeChart"></canvas>
                    </div>
                    <p class="text-center text-sm text-textMuted mt-4">Complete the items to harden your agents.</p>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-border mt-12 py-8">
        <div class="max-w-6xl mx-auto px-4 text-center text-textMuted text-sm">
            <p>¬© 2025 Wazuh Agent Hardening Guide.</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const contentData = {
            windows: {
                title: "Windows Server Hardening",
                desc: "Windows hardening focuses on visibility. Default logs miss critical context like command line arguments and network connections. We use Sysmon and specific GPOs to bridge this gap.",
                tip: "For Event 4740 (Account Lockout), you do NOT need to edit ossec.conf. Just enable the Audit Policy in Windows, and Wazuh's default Security channel collection will pick it up.",
                steps: [
                    {
                        id: "win1",
                        title: "1. The Account Block Fix (Event 4740)",
                        icon: "üîí",
                        summary: "Enable GPO audit policies to detect brute force attempts.",
                        details: `
                            <p class="mb-2"><strong>Action:</strong> Open Group Policy Management or <code>secpol.msc</code>.</p>
                            <p class="mb-2"><strong>Navigate to:</strong> <code>Advanced Audit Policy Configuration > Account Management</code>.</p>
                            <ul class="list-disc pl-5 mb-4 space-y-1 text-sm">
                                <li>Enable <strong>Audit User Account Management</strong> (Success & Failure).</li>
                                <li>Recommended: <strong>Audit Account Lockout</strong> (Success & Failure).</li>
                            </ul>
                            <p class="text-sm bg-blue-50 text-blue-800 p-2 rounded"><strong>Note:</strong> No change needed in <code>ossec.conf</code>. Default config collects this.</p>
                        `
                    },
                    {
                        id: "win2",
                        title: "2. Install & Configure Sysmon",
                        icon: "üëÅÔ∏è",
                        summary: "Get visibility into process args, hashes, and network connections.",
                        details: `
                            <p class="mb-2"><strong>Why:</strong> Default logs just say "App.exe ran". Sysmon tells you "Who, What, Where, and How".</p>
                            <p class="mb-2">1. Install Sysmon with a hardened config (e.g., SwiftOnSecurity).</p>
                            <p class="mb-2">2. Add this block to your agent's <code>ossec.conf</code>:</p>
                            <div class="bg-codeBg text-gray-300 p-3 rounded text-xs font-mono overflow-x-auto custom-scroll">
&lt;localfile&gt;
  &lt;location&gt;Microsoft-Windows-Sysmon/Operational&lt;/location&gt;
  &lt;log_format&gt;eventchannel&lt;/log_format&gt;
&lt;/localfile&gt;
                            </div>
                        `
                    },
                    {
                        id: "win3",
                        title: "3. PowerShell Script Block Logging",
                        icon: "üìú",
                        summary: "Decode obfuscated PowerShell attacks and see actual commands.",
                        details: `
                            <p class="mb-2"><strong>Action (GPO):</strong> <code>Computer Config > Admin Templates > Windows Components > PowerShell > Turn on Script Block Logging</code>.</p>
                            <p class="mb-2"><strong>Wazuh Config:</strong> Add this to <code>ossec.conf</code>:</p>
                            <div class="bg-codeBg text-gray-300 p-3 rounded text-xs font-mono overflow-x-auto custom-scroll">
&lt;localfile&gt;
  &lt;location&gt;Microsoft-Windows-PowerShell/Operational&lt;/location&gt;
  &lt;log_format&gt;eventchannel&lt;/log_format&gt;
&lt;/localfile&gt;
                            </div>
                        `
                    }
                ]
            },
            linux: {
                title: "Linux Server Hardening",
                desc: "Linux defaults often rely on syslog which misses execution details. The 'Hardening' solution is Auditd, the kernel-level auditing system.",
                tip: "Make sure to install Auditd (`apt install auditd`) before configuring Wazuh. The 'Who-Data' FIM feature depends on Auditd being active.",
                steps: [
                    {
                        id: "lin1",
                        title: "1. Enable Auditd",
                        icon: "üêß",
                        summary: "The 'Sysmon for Linux'. Captures kernel-level system calls.",
                        details: `
                            <p class="mb-2"><strong>Install:</strong> <code>sudo apt install auditd</code> or <code>yum install auditd</code>.</p>
                            <p class="mb-2"><strong>Wazuh Config:</strong> Ensure <code>ossec.conf</code> has the following (usually default):</p>
                            <div class="bg-codeBg text-gray-300 p-3 rounded text-xs font-mono overflow-x-auto custom-scroll">
&lt;localfile&gt;
  &lt;log_format&gt;audit&lt;/log_format&gt;
  &lt;location&gt;/var/log/audit/audit.log&lt;/location&gt;
&lt;/localfile&gt;
                            </div>
                        `
                    },
                    {
                        id: "lin2",
                        title: "2. Hardening Rules (audit.rules)",
                        icon: "üìù",
                        summary: "Configure Auditd to watch commands and critical files.",
                        details: `
                            <p class="mb-2">Edit <code>/etc/audit/rules.d/audit.rules</code>.</p>
                            <p class="mb-1 text-sm font-semibold">Monitor all commands (Root & User):</p>
                            <div class="bg-codeBg text-gray-300 p-3 rounded text-xs font-mono mb-2 overflow-x-auto custom-scroll">
-a always,exit -F arch=b64 -S execve -k audit-wazuh-c
-a always,exit -F arch=b32 -S execve -k audit-wazuh-c
                            </div>
                            <p class="mb-1 text-sm font-semibold">Monitor Critical Configs:</p>
                            <div class="bg-codeBg text-gray-300 p-3 rounded text-xs font-mono overflow-x-auto custom-scroll">
-w /etc/passwd -p wa -k audit-wazuh-w
-w /etc/ssh/sshd_config -p wa -k audit-wazuh-w
                            </div>
                            <p class="mt-2 text-xs">Run <code>augenrules --load</code> to apply.</p>
                        `
                    },
                    {
                        id: "lin3",
                        title: "3. Enable 'Who-Data' in FIM",
                        icon: "üë§",
                        summary: "Identifies EXACTLY who changed a file, not just that it changed.",
                        details: `
                            <p class="mb-2"><strong>Wazuh Config:</strong> Update your <code>&lt;syscheck&gt;</code> block to use <code>whodata='yes'</code>.</p>
                            <div class="bg-codeBg text-gray-300 p-3 rounded text-xs font-mono overflow-x-auto custom-scroll">
&lt;syscheck&gt;
  &lt;directories check_all="yes" whodata="yes"&gt;/bin,/sbin&lt;/directories&gt;
  &lt;directories check_all="yes" whodata="yes"&gt;/etc&lt;/directories&gt;
&lt;/syscheck&gt;
                            </div>
                        `
                    }
                ]
            }
        };

        const checklistData = [
            { id: "c1", os: "Windows", task: "Enable Audit User Account Management GPO", critical: true },
            { id: "c2", os: "Windows", task: "Install Sysmon with hardened config", critical: true },
            { id: "c3", os: "Windows", task: "Add Sysmon block to ossec.conf", critical: false },
            { id: "c4", os: "Windows", task: "Enable PowerShell Script Block Logging", critical: true },
            { id: "c5", os: "Linux", task: "Install Auditd package", critical: true },
            { id: "c6", os: "Linux", task: "Add execve rules to audit.rules", critical: true },
            { id: "c7", os: "Linux", task: "Configure Watch-lists (passwd, shadow)", critical: false },
            { id: "c8", os: "Linux", task: "Enable whodata='yes' in ossec.conf", critical: true }
        ];

        // --- State Management ---
        let currentTab = 'windows';
        let expandedAccordion = null;
        let impactChartInstance = null;
        let gaugeChartInstance = null;

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderTab(currentTab);
            renderChecklist();
            initGaugeChart();
        });

        // --- Functions ---

        function switchTab(tab) {
            currentTab = tab;
            
            // Update UI styles
            document.getElementById('tab-windows').className = tab === 'windows' ? 'tab-active px-6 py-3 text-lg transition-all focus:outline-none' : 'tab-inactive px-6 py-3 text-lg transition-all focus:outline-none cursor-pointer';
            document.getElementById('tab-linux').className = tab === 'linux' ? 'tab-active px-6 py-3 text-lg transition-all focus:outline-none' : 'tab-inactive px-6 py-3 text-lg transition-all focus:outline-none cursor-pointer';
            
            renderTab(tab);
        }

        function renderTab(tab) {
            const data = contentData[tab];
            
            // Text Content
            document.getElementById('os-title').innerText = data.title;
            document.getElementById('os-desc').innerText = data.desc;
            document.getElementById('pro-tip-text').innerText = data.tip;

            // Accordion
            const container = document.getElementById('accordion-container');
            container.innerHTML = '';
            
            data.steps.forEach((step, index) => {
                const isOpen = index === 0; // Open first by default
                const item = document.createElement('div');
                item.className = 'border border-border rounded-lg overflow-hidden transition-all duration-300 bg-white';
                
                item.innerHTML = `
                    <button onclick="toggleAccordion('${step.id}')" class="w-full flex items-center justify-between p-4 text-left hover:bg-stone-50 transition-colors">
                        <div class="flex items-center gap-3">
                            <span class="text-xl">${step.icon}</span>
                            <div>
                                <h4 class="font-semibold text-textMain">${step.title}</h4>
                                <p class="text-xs text-textMuted mt-0.5">${step.summary}</p>
                            </div>
                        </div>
                        <span id="icon-${step.id}" class="text-textMuted transform transition-transform ${isOpen ? 'rotate-180' : ''}">‚ñº</span>
                    </button>
                    <div id="content-${step.id}" class="${isOpen ? 'block' : 'hidden'} bg-bgMain border-t border-border">
                        <div class="p-4 text-sm text-textMain">
                            ${step.details}
                        </div>
                    </div>
                `;
                container.appendChild(item);
            });

            // Update Charts
            updateImpactChart(tab);
        }

        function toggleAccordion(id) {
            const content = document.getElementById(`content-${id}`);
            const icon = document.getElementById(`icon-${id}`);
            
            if (content.classList.contains('hidden')) {
                // Close others? Optional, but keeps it clean
                document.querySelectorAll('[id^="content-"]').forEach(el => el.classList.add('hidden'));
                document.querySelectorAll('[id^="icon-"]').forEach(el => el.classList.remove('rotate-180'));

                content.classList.remove('hidden');
                icon.classList.add('rotate-180');
            } else {
                content.classList.add('hidden');
                icon.classList.remove('rotate-180');
            }
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // --- Chart.js Logic ---

        function updateImpactChart(tab) {
            const ctx = document.getElementById('impactChart').getContext('2d');
            const legend = document.getElementById('chart-legend');
            
            if (impactChartInstance) {
                impactChartInstance.destroy();
            }

            // Common Options
            const commonOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: {
                        backgroundColor: '#1C1917',
                        padding: 10,
                        titleFont: { family: 'Inter', size: 13 },
                        bodyFont: { family: 'Inter', size: 12 }
                    }
                }
            };

            if (tab === 'windows') {
                legend.innerText = "The Radar Chart shows how coverage expands from basic Login monitoring to full Process and Network visibility.";
                
                impactChartInstance = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['Process Args', 'Network Conns', 'File Hashes', 'Logins', 'Scripts'],
                        datasets: [{
                            label: 'Default Config',
                            data: [1, 0, 2, 8, 1],
                            fill: true,
                            backgroundColor: 'rgba(120, 113, 108, 0.2)', // secondary
                            borderColor: 'rgb(120, 113, 108)',
                            pointBackgroundColor: 'rgb(120, 113, 108)',
                        }, {
                            label: 'Hardened (Sysmon+)',
                            data: [9, 9, 8, 9, 8],
                            fill: true,
                            backgroundColor: 'rgba(217, 119, 6, 0.2)', // accent
                            borderColor: 'rgb(217, 119, 6)',
                            pointBackgroundColor: 'rgb(217, 119, 6)',
                        }]
                    },
                    options: {
                        ...commonOptions,
                        scales: {
                            r: {
                                angleLines: { color: '#E7E5E4' },
                                grid: { color: '#E7E5E4' },
                                pointLabels: { font: { family: 'Inter', size: 11 } },
                                suggestedMin: 0,
                                suggestedMax: 10
                            }
                        }
                    }
                });

            } else {
                legend.innerText = "The Bar Chart compares the volume of actionable security events captured before and after Auditd implementation.";
                
                impactChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Auth/Logins', 'File Changes', 'Command Exec', 'Config Edits'],
                        datasets: [{
                            label: 'Default (Syslog)',
                            data: [8, 4, 1, 2],
                            backgroundColor: 'rgba(120, 113, 108, 0.7)',
                            borderColor: 'rgb(120, 113, 108)',
                            borderWidth: 1
                        }, {
                            label: 'Hardened (Auditd)',
                            data: [9, 9, 10, 10],
                            backgroundColor: 'rgba(217, 119, 6, 0.8)',
                            borderColor: 'rgb(217, 119, 6)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        ...commonOptions,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 10,
                                grid: { color: '#E5E7EB' }
                            },
                            x: {
                                grid: { display: false }
                            }
                        }
                    }
                });
            }
        }

        function renderChecklist() {
            const container = document.getElementById('checklist-container');
            container.innerHTML = '';

            checklistData.forEach(item => {
                const div = document.createElement('div');
                div.className = `check-item flex items-center justify-between p-3 border border-border rounded-lg transition-colors cursor-pointer hover:bg-stone-50`;
                div.onclick = (e) => {
                    // Prevent triggering if clicking a link inside (if any)
                    if(e.target.tagName === 'INPUT') return;
                    toggleCheck(item.id);
                };

                const isChecked = item.completed ? 'checked' : '';
                const styleClass = item.completed ? 'bg-teal-50 border-teal-500' : 'bg-white';
                
                // Update outer class
                div.className = `check-item flex items-center justify-between p-3 border rounded-lg transition-colors cursor-pointer ${item.completed ? 'bg-teal-50 border-teal-500' : 'bg-white border-border hover:bg-stone-50'}`;

                div.innerHTML = `
                    <div class="flex items-center gap-3">
                        <input type="checkbox" id="chk-${item.id}" ${isChecked} onchange="toggleCheck('${item.id}')" class="w-5 h-5 text-accent rounded focus:ring-accent border-gray-300">
                        <div class="flex flex-col">
                            <span class="text-sm font-medium ${item.completed ? 'text-teal-900 line-through' : 'text-textMain'}">${item.task}</span>
                            <span class="text-xs ${item.completed ? 'text-teal-700' : 'text-textMuted'}">${item.os} ‚Ä¢ ${item.critical ? 'Critical' : 'Recommended'}</span>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
            updateGauge();
        }

        function toggleCheck(id) {
            const item = checklistData.find(i => i.id === id);
            if (item) {
                item.completed = !item.completed;
                renderChecklist();
            }
        }

        function initGaugeChart() {
            const ctx = document.getElementById('gaugeChart').getContext('2d');
            gaugeChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Completed', 'Remaining'],
                    datasets: [{
                        data: [0, 100],
                        backgroundColor: [
                            '#14B8A6', // teal-500
                            '#E7E5E4'  // stone-200
                        ],
                        borderWidth: 0,
                        cutout: '75%',
                        circumference: 180,
                        rotation: 270,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: { enabled: false }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }

        function updateGauge() {
            if (!gaugeChartInstance) return;
            
            const total = checklistData.length;
            const completed = checklistData.filter(i => i.completed).length;
            const percentage = Math.round((completed / total) * 100);
            
            gaugeChartInstance.data.datasets[0].data = [completed, total - completed];
            gaugeChartInstance.update();

            // Center Text Plugin (Custom simple implementation via generic text update would be hard in ChartJS default, 
            // so we will just update a DOM element overlay if we had one, but visually the gauge is enough for this scope).
        }

    </script>
</body>
</html>




